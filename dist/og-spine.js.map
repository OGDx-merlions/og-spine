{"version":3,"sources":["og-spine.es6.js"],"names":["Polymer","is","behaviors","IronResizableBehavior","listeners","properties","logo","String","avatar","items","type","Array","value","observer","alertsAndCases","data","ready","onItemsChange","newItems","oldItems","_processItems","length","forEach","_item","idx","hideInDevices","every","_mediaQuery","window","matchMedia","matches","set","labelOnly","_onDataChange","newVal","oldVal","_itemData","formatter","valueFormatter","defaultValueFormatter","trend","direction","color","toggleSparkline","notifyPath","getKpiState","fireLogoTap","fire","fireAlertAvatarTapEvent","event","handleKpiTap","model","get","sparklineConfig","val","parseInt","toString","replace","_hasData","alerts","_isHighProrityAlert","_isMediumProrityAlert","_isCase","_onIronResize","arr","splice"],"mappings":"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","file":"og-spine.js","sourcesContent":["(function() {\n  Polymer({\n    is: 'og-spine',\n    \n    behaviors: [\n      Polymer.IronResizableBehavior\n    ],\n\n    listeners: {\n      'iron-resize': '_onIronResize'\n    },\n\n    properties: {\n      /**\n       * Path to Logo\n       * @property logo\n       */\n      logo: String,\n      /**\n       * Path to Avatar\n       * @property avatar\n       */\n      avatar: String,\n      /**\n       * Array of Spine items of the format\n       * [{\n       *  label: \"Well Count\"\n       * }, {\n       *  label: \"Liquid\",\n       *  unit: \"bbl/day\",\n       *  hideInDevices: ['min-width:1000px'],\n       *  sparklineConfig: {\n       *    width: \"125\"\n            height: \"75\"\n            lineWidth: \"3\"\n            lineColor: \"#e9a24b\"\n            axisColor: \"#677e8c\"\n            axisWidth: \"1.5\"\n            curPositionRadius: \"4\"\n            curPositionColor: \"red\"\n       *  },\n       *  valueFormatter: function(val) {\n       *    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n       *  }\n       * }...]\n       * @property items\n       */\n      items: {\n        type: Array,\n        value() {\n          return [];\n        },\n        observer: 'onItemsChange'\n      },\n      /**\n       * Array of alerts of the format\n       * [{\n       *  type: 'high',\n       *  label: 'ESP Alert',\n       *  subtitle: 'Midland Well 2F'\n       * }, {\n       *  type: 'medium',\n       *  label: 'Pump Alert',\n       *  subtitle: 'Goose Creek Well 3B'\n       * }...]\n       * @property alertsAndCases\n       */\n      alertsAndCases: {\n        type: Array,\n        value() {\n          return [];\n        }\n      },\n      /**\n       * Array of Spine item data\n       * [{\n       *   value: '280'\n       * }, {\n       *   value: '289488'\n       *   trend: {\n       *    value: '15009'\n       *    direction: 'up'\n       *   },\n       *   sparkline: {\n       *     value: [[1,1],[2,2],[3,4],[4,2],[5,5]],\n       *     cursorPosition: [2,2] \n       *   }\n       * }, {\n       *   value: '144344'\n       *   trend: {\n       *    value: '3229'\n       *    direction: 'down'\n       *   }\n       * }...]\n       * @property data\n       */\n      data: {\n        type: Array,\n        value() {\n          return [];\n        },\n        observer: \"_onDataChange\"\n      }\n    },\n    ready: function() {\n    },\n    onItemsChange(newItems, oldItems) {\n      this._processItems(newItems);\n    },\n    _processItems(items) {\n      if(items && items.length) {\n        items.forEach((_item, idx) => {\n          if(_item.hideInDevices && _item.hideInDevices.length) {\n            _item.hideInDevices.every((_mediaQuery) => {\n              if(_mediaQuery && window.matchMedia(_mediaQuery).matches) {\n                this.set(`items.${idx}.show`, false);\n                return false;\n              } else {\n                this.set(`items.${idx}.show`, true);\n                return true;\n              }\n            });\n          } else {\n            this.set(`items.${idx}.show`, true);\n          }\n          if(!_item.labelOnly) {\n            this.set(`items.${idx}.labelOnly`, false);\n          } else {\n            this.set(`items.${idx}.labelOnlyFlexClass`, 'flex--middle');\n          }\n        });\n        this._onDataChange(this.data);\n      }\n    },\n    _onDataChange(newVal, oldVal) {\n      if(newVal && this.items) {\n        newVal.forEach((_itemData, idx) => {\n          const formatter = this.items[idx].valueFormatter || this.defaultValueFormatter;\n          _itemData.value = formatter(_itemData.value);\n          if(_itemData && _itemData.trend) {\n            _itemData.trend.value = formatter(_itemData.trend.value);\n            if(_itemData.trend.direction === 'up') {\n              _itemData.trend.color = \"#7fae1b\";\n            } else {\n              _itemData.trend.color = \"#d67577\";\n            }\n          }\n        });\n        if(this.items) {\n          this.items.forEach((_item, idx) =>  {\n            if(newVal.length > idx) {_item.data = newVal[idx]};\n            _item.toggleSparkline = false;\n          });\n        }\n        this.notifyPath('items.*');\n      }\n    },\n    getKpiState(idx) {\n      return this.items[idx].toggleSparkline;\n    },\n    fireLogoTap: function() {\n      this.fire('logo-tapped');\n    },\n    fireAlertAvatarTapEvent(event) {\n      this.fire(\"alert-avatar-section-tapped\", event);\n    },\n    handleKpiTap(event) {\n      const idx = event.model.get('idx');\n      if(!this.items[idx].sparklineConfig) {return;}\n      this.set(`items.${idx}.toggleSparkline`, !this.items[idx].toggleSparkline);\n      this.notifyPath(`items.${idx}.toggleSparkline`);\n    },\n    defaultValueFormatter(val) {\n      if(parseInt(val)) {\n        return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      }\n      return val;\n    },\n    _hasData(alerts) {\n      return alerts.length > 0;\n    },\n    _isHighProrityAlert(type) {\n      return type === 'high';\n    },\n    _isMediumProrityAlert(type) {\n      return type === 'medium';\n    },\n    _isCase(type) {\n      return type === 'case';\n    },\n    _onIronResize() {\n      if(this.items) {\n        let arr = this.splice('items', 0);\n        this.set('items', arr);\n      }\n    }\n  });\n})();\n"]}